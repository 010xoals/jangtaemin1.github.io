<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Song — Music Discovery Hub</title>
  <meta name="description" content="Song page with video, release date, and vote.">
  <meta property="og:title" content="Song — Music Discovery Hub">
  <meta property="og:description" content="Song page with video, release date, and vote.">
  <meta property="og:type" content="website">
  <meta property="og:url" content="https://jangtaemin1.com/song.html">
  <meta property="og:image" content="https://picsum.photos/seed/music-hub/1200/630">
  <meta name="twitter:card" content="summary_large_image">
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="/assets/css/style.css">
</head>
<body>
<header class="site-header">
  <div class="container h-wrap">
    <a class="brand" href="/"><span class="logo">Mu</span><strong>Music Discovery Hub</strong></a>
    <nav class="tabs">
      <a class="tab" href="/kpop.html">K-POP</a>
      <a class="tab" href="/jpop.html">J-POP</a>
      <a class="tab" href="/pop.html">POP</a>
      <a class="tab" href="/calendar.html">Calendar</a>
      <a class="tab" href="/artists/index.html">Artists</a>
      <a class="tab" href="/games.html">Vote</a>
      <a class="tab" href="/news.html">News</a>
    </nav>
  </div>
  <div id="ad_top_leaderboard" class="ad ad-leader">AD TOP 970×250 / 320×100</div>
</header>
<main class="container">

<section class="hero"><h1 id="stitle">Song</h1><p id="smeta" class="meta"></p></section>
<div class="section"><div id="player" class="iframe-wrap"></div></div>
<div class="section"><h2>Vote: Is this your pick of the week?</h2><button data-vote="song" class="btn" id="votebtn">Vote Now</button></div>
<script>
function param(name){return new URLSearchParams(location.search).get(name)||'';}
(async function(){
  const [artists,songs] = await Promise.all([fetch('/data/artists.json').then(r=>r.json()),fetch('/data/songs.json').then(r=>r.json())]);
  const slug = param('slug');
  const s = songs.find(x=>x.slug===slug||x.id===slug);
  if(!s){ document.getElementById('stitle').textContent='Not found'; return; }
  const a = artists.find(x=>x.id===s.artist_id) || {name:''};
  document.title = s.title + ' — Music Discovery Hub';
  document.getElementById('stitle').textContent = s.title;
  document.getElementById('smeta').textContent = a.name + ' · Released ' + (s.release_date||'-');
  function ytId(u){try{const url=new URL(u); if(url.hostname.includes('youtu.be')) return url.pathname.slice(1); const v=url.searchParams.get('v'); if(v) return v; const p=url.pathname.split('/').filter(Boolean); if(p[0]==='embed'&&p[1]) return p[1];}catch(e){} return null;}
  const vid = ytId(s.yt_url);
  document.getElementById('player').innerHTML = vid? `<iframe width="100%" height="100%" src="https://www.youtube.com/embed/${vid}" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share" allowfullscreen></iframe>` : '<div class="ad">No video</div>';
  // personalize vote key
  const k = 'vote:song:'+slug;
  const btn = document.getElementById('votebtn');
  if(localStorage.getItem(k)){ btn.textContent='Already voted ✔'; btn.classList.add('voted'); }
  btn.addEventListener('click',()=>{
    if(localStorage.getItem(k)) return;
    localStorage.setItem(k,'1');
    btn.textContent='Thanks for voting!';
    btn.classList.add('voted');
  });
})();
</script>

</main>
<footer class="site-footer">
  <div class="container f-wrap">
    <div>© <span id="year"></span> Music Discovery Hub · Built by jangtaemin1.com</div>
    <div class="links">
      <a href="/privacy.html">Privacy</a>
      <a href="/ads.html">Ads</a>
      <a href="/contact.html">Contact</a>
      <a href="/rss.xml">RSS</a>
    </div>
  </div>
</footer>
<script src="/assets/js/app.js"></script>
</body>
</html>